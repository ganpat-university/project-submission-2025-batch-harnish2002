{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Career Guidance System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/admin_dashboard.css' %}">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css">
    <style>
        /* Added styles for matching height and scrollbar */
        .card {
            height: 100%;
        }
        .activities-container {
            height: 230px;
            overflow-y: auto;
            scrollbar-width: thin;
        }
        .activities-container::-webkit-scrollbar {
            width: 6px;
        }
        .activities-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .activities-container::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .activities-container::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .card-body {
            padding: 1rem;
        }
        /* Ensure both cards have same height */
        .dashboard-stats .row {
            display: flex;
            flex-wrap: wrap;
        }
        .dashboard-stats .col-md-6 {
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <!-- SIDEBAR -->
    <section id="sidebar">
        <a href="#" class="brand">
            <i class="fas fa-chart-line me-2"></i>
            <span class="text logo">CGS Admin</span>
        </a>
        <ul class="side-menu top">
            <li class="active">
                <a href="#" class="active-tab" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="text">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="#" class="tab-link" data-tab="users">
                    <i class="fas fa-users"></i>
                    <span class="text">Users</span>
                </a>
            </li>
            <li>
                <a href="#" class="tab-link" data-tab="courses">
                    <i class="fas fa-book"></i>
                    <span class="text">Courses</span>
                </a>
            </li>
            <li>
                <a href="#" class="tab-link" data-tab="quizzes">
                    <i class="fas fa-question-circle"></i>
                    <span class="text">Quizzes</span>
                </a>
            </li>
            <li>
                <a href="#" class="tab-link" data-tab="questions">
                    <i class="fas fa-list-ol"></i>
                    <span class="text">Questions</span>
                </a>
            </li>
        </ul>
        <ul class="side-menu">
            <li>
                <a href="{% url 'logout' %}" class="logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="text">Logout</span>
                </a>
            </li>
        </ul>
    </section>
    <!-- SIDEBAR -->

    <!-- CONTENT -->
    <section id="content">
        <!-- NAVBAR -->
        <nav>
            <i class="fas fa-bars toggle-sidebar"></i>
            <span class="admin-welcome">Welcome, {{ admin_full_name }}</span>
        </nav>
        <!-- NAVBAR -->

        <!-- MAIN -->
        <main>
            <div class="head-title">
                <div class="left">
                    <h1 id="current-section-title">Dashboard</h1>
                    <ul class="breadcrumb">
                        <li>
                            <a href="#">Admin</a>
                        </li>
                        <li>&nbsp;&nbsp;<i class="fas fa-chevron-right">&nbsp;&nbsp;</i></li>
                        <li>
                            <a class="active-breadcrumb" href="#">Dashboard</a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Alert Container -->
            <div id="alert-container"></div>

            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard-tab">
                <div class="dashboard-section">
                    <h2 class="section-title mb-4">System Overview</h2>
                    <ul class="box-info">
                        <li>
                            <i class="fas fa-users"></i>
                            <div class="text">
                                <h3>{{ users|length }}</h3>
                                <p>Total Users</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-book"></i>
                            <div class="text">
                                <h3>{{ courses|length|default:"0" }}</h3>
                                <p>Total Courses</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-question-circle"></i>
                            <div class="text">
                                <h3>{{ quizzes|length|default:"0" }}</h3>
                                <p>Total Quizzes</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-list-ol"></i>
                            <div class="text">
                                <h3>{{ questions|length|default:"0" }}</h3>
                                <p>Total Questions</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="dashboard-stats mt-5">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Recent User Activities</h5>
                                </div>
                                <div class="card-body p-0">
                                    <div class="activities-container">
                                        <ul class="list-group list-group-flush">
                                            {% if recent_activities %}
                                                {% for activity in recent_activities %}
                                                    <li class="list-group-item">{{ activity.description }} <small class="text-muted">{{ activity.timestamp|timesince }} ago</small></li>
                                                {% endfor %}
                                            {% else %}
                                                <li class="list-group-item">No recent activities found</li>
                                            {% endif %}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5>System Statistics</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <h6>User Registration Trend</h6>
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">75%</div>
                                        </div>
                                        <small class="text-muted">75% increase from last month</small>
                                    </div>
                                    <div class="mb-3">
                                        <h6>Course Completion Rate</h6>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 62%;" aria-valuenow="62" aria-valuemin="0" aria-valuemax="100">62%</div>
                                        </div>
                                        <small class="text-muted">62% of enrolled users complete courses</small>
                                    </div>
                                    <div>
                                        <h6>Quiz Participation</h6>
                                        <div class="progress">
                                            <div class="progress-bar bg-info" role="progressbar" style="width: 48%;" aria-valuenow="48" aria-valuemin="0" aria-valuemax="100">48%</div>
                                        </div>
                                        <small class="text-muted">48% of users attempt quizzes</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-section mt-5">
                    <h2 class="section-title mb-4">Quiz Performance Analytics</h2>
                    <div class="dashboard-stats">
                        <div class="row">
                            <!-- The charts will be dynamically inserted here by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div class="tab-content" id="users-tab">
                <div class="users-section">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="section-title">User Management</h2>
                        <button class="btn btn-primary" id="add-user-btn">
                            <i class="fas fa-user-plus"></i> Add New User
                        </button>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="users-table" class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Contact</th>
                                            <th>Date of Birth</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for user in users %}
                                        <tr>
                                            <td>{{ user.id }}</td>
                                            <td>{{ user.first_name }} {{ user.last_name }}</td>
                                            <td>{{ user.email }}</td>
                                            <td>{{ user.contact_number }}</td>
                                            <td>{{ user.date_of_birth }}</td>
                                            <td>
                                                <button class="btn btn-sm btn-info edit-user" data-id="{{ user.id }}">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger delete-user" data-id="{{ user.id }}">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Courses Tab -->
            <div class="tab-content" id="courses-tab">
                <div class="courses-section">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="section-title">Course Management</h2>
                        <button class="btn btn-primary" id="add-course-btn">
                            <i class="fas fa-plus"></i> Add New Course
                        </button>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="courses-table" class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Title</th>
                                            <th>Description</th>
                                            <th>Image</th>
                                            <th>Status</th>
                                            <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for course in courses %}
                                        <tr>
                                            <td>{{ course.id }}</td>
                                            <td>{{ course.title }}</td>
                                            <td>{{ course.description|truncatechars:50 }}</td>
                                            <td>
                                                {% if course.image %}
                                                <img src="{{ course.image.url }}" alt="{{ course.title }}" width="50" height="50" class="img-thumbnail">
                                                {% else %}
                                                <span class="badge bg-secondary">No Image</span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <span class="badge {% if course.is_active %}bg-success{% else %}bg-danger{% endif %}">
                                                    {{ course.is_active|yesno:"Active,Inactive" }}
                                                </span>
                                            </td>
                                            <td>{{ course.created_at|date:"M d, Y" }}</td>
                                            <td>
                                                <button class="btn btn-sm btn-info edit-course" data-id="{{ course.id }}">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-danger delete-course" data-id="{{ course.id }}">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quizzes Tab -->
            <div class="tab-content" id="quizzes-tab">
                <div class="quizzes-section">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="section-title">Quiz Management</h2>
                        <button class="btn btn-primary" id="add-quiz-btn">
                            <i class="fas fa-plus"></i> Add New Quiz
                        </button>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="quizzes-table" class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Title</th>
                                            <th>Course</th>
                                            <th>Description</th>
                                            <th>Duration</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% if quizzes %}
                                            {% for quiz in quizzes %}
                                            <tr>
                                                <td>{{ quiz.id }}</td>
                                                <td>{{ quiz.title }}</td>
                                                <td>{{ quiz.course.title }}</td>
                                                <td>{{ quiz.description|truncatechars:50 }}</td>
                                                <td>{{ quiz.duration }} minutes</td>
                                                <td>
                                                    <button class="btn btn-sm btn-info edit-quiz" data-id="{{ quiz.id }}">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-danger delete-quiz" data-id="{{ quiz.id }}">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="6" class="text-center">No quizzes available</td>
                                            </tr>
                                        {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Questions Tab -->
    <div class="tab-content" id="questions-tab">
        <div class="questions-section">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="section-title">Question Management</h2>
                <button class="btn btn-primary" id="add-question-btn">
                    <i class="fas fa-plus"></i> Add New Question
                </button>
            </div>
            
            <!-- Quiz Filter -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="quizFilter" class="form-label">Filter by Quiz:</label>
                            <select class="form-select" id="quizFilter">
                                <option value="">All Quizzes</option>
                                {% for quiz in quizzes %}
                                <option value="{{ quiz.id }}">{{ quiz.title }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="questions-table" class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Quiz</th>
                                    <th>Question</th>
                                    <th>Correct Option</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for question in questions %}
                                <tr>
                                    <td>{{ question.id }}</td>
                                    <td>{{ question.quiz.title }}</td>
                                    <td>{{ question.text|truncatechars:50 }}</td>
                                    <td>
                                        {% if question.correct_option == "option1" %}
                                            {{ question.option1 }}
                                        {% elif question.correct_option == "option2" %}
                                            {{ question.option2 }}
                                        {% elif question.correct_option == "option3" %}
                                            {{ question.option3 }}
                                        {% elif question.correct_option == "option4" %}
                                            {{ question.option4 }}
                                        {% else %}
                                            Option {{ question.correct_option|slice:"-1" }}
                                        {% endif %}
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-info edit-question" data-id="{{ question.id }}">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-danger delete-question" data-id="{{ question.id }}">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
        </main>
        <!-- MAIN -->
    </section>
    <!-- CONTENT -->

    <!-- Add/Edit User Modal -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Add New User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm">
                        <input type="hidden" id="userId">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="firstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="firstName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="lastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="lastName" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="col-md-6">
                                <label for="contactNumber" class="form-label">Contact Number</label>
                                <input type="text" class="form-control" id="contactNumber" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="dateOfBirth" class="form-label">Date of Birth</label>
                                <input type="date" class="form-control" id="dateOfBirth" required>
                            </div>
                            <div class="col-md-6 password-field">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password">
                                <small class="text-muted">Leave blank to keep current password (for editing).</small>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="skills" class="form-label">Skills (comma separated)</label>
                            <textarea class="form-control" id="skills" rows="2"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="interests" class="form-label">Interests (comma separated)</label>
                            <textarea class="form-control" id="interests" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveUserBtn">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete User Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this user? This action cannot be undone.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Course Modal -->
    <div class="modal fade" id="courseModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="courseModalTitle">Add New Course</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="courseForm" enctype="multipart/form-data">
                        <input type="hidden" id="courseId">
                        <div class="mb-3">
                            <label for="courseTitle" class="form-label">Course Title</label>
                            <input type="text" class="form-control" id="courseTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="courseDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="courseDescription" rows="3" required></textarea>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="courseImage" class="form-label">Course Image</label>
                                <input type="file" class="form-control" id="courseImage" accept="image/*">
                                <div id="currentImageContainer" class="mt-2 d-none">
                                    <p>Current Image:</p>
                                    <img id="currentImage" src="" alt="Current Course Image" class="img-thumbnail" style="max-width: 150px;">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="courseStatus" class="form-label">Status</label>
                                <select class="form-select" id="courseStatus" required>
                                    <option value="true">Active</option>
                                    <option value="false">Inactive</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="courseRoadmap" class="form-label">Roadmap Link (Optional)</label>
                                <input type="url" class="form-control" id="courseRoadmap" placeholder="https://example.com/roadmap">
                            </div>
                            <!-- <div class="col-md-6">
                                <label for="courseEnrollment" class="form-label">Enrollment Link (Optional)</label>
                                <input type="url" class="form-control" id="courseEnrollment" placeholder="https://example.com/enroll">
                            </div> -->
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveCourseBtn">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Course Confirmation Modal -->
    <div class="modal fade" id="deleteCourseModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delete Course</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this course? This action cannot be undone and will remove all related quiz data.</p>
                    <p class="fw-bold text-danger">Course: <span id="courseToDelete"></span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteCourseBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Quiz Modal (Placeholder) -->
    <div class="modal fade" id="quizModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quizModalTitle">Add New Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="quizForm">
                        <input type="hidden" id="quizId">
                        <div class="mb-3">
                            <label for="quizTitle" class="form-label">Quiz Title</label>
                            <input type="text" class="form-control" id="quizTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="quizCourse" class="form-label">Related Course</label>
                            <select class="form-select" id="quizCourse" required>
                                <option value="">Select a course</option>
                                {% for course in courses %}
                                <option value="{{ course.id }}">{{ course.title }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="quizDuration" class="form-label">Duration (minutes)</label>
                            <input type="number" class="form-control" id="quizDuration" min="5" required>
                        </div>
                        <div class="mb-3">
                            <label for="quizDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="quizDescription" rows="3" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveQuizBtn">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Quiz Confirmation Modal -->
    <div class="modal fade" id="deleteQuizModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delete Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this quiz? This action cannot be undone and will remove all related question data and user results.</p>
                    <p class="fw-bold text-danger">Quiz: <span id="quizToDelete"></span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteQuizBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>
        <!-- Add/Edit Question Modal -->
        <div class="modal fade" id="questionModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="questionModalTitle">Add New Question</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="questionForm">
                            <input type="hidden" id="questionId">
                            <div class="mb-3">
                                <label for="questionQuiz" class="form-label">Quiz</label>
                                <select class="form-select" id="questionQuiz" required>
                                    <option value="">Select a quiz</option>
                                    {% for quiz in quizzes %}
                                    <option value="{{ quiz.id }}">{{ quiz.title }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="questionText" class="form-label">Question Text</label>
                                <textarea class="form-control" id="questionText" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="option1" class="form-label">Option 1</label>
                                <input type="text" class="form-control" id="option1" required>
                            </div>
                            <div class="mb-3">
                                <label for="option2" class="form-label">Option 2</label>
                                <input type="text" class="form-control" id="option2" required>
                            </div>
                            <div class="mb-3">
                                <label for="option3" class="form-label">Option 3</label>
                                <input type="text" class="form-control" id="option3" required>
                            </div>
                            <div class="mb-3">
                                <label for="option4" class="form-label">Option 4</label>
                                <input type="text" class="form-control" id="option4" required>
                            </div>
                            <div class="mb-3">
                                <label for="correctOption" class="form-label">Correct Option</label>
                                <select class="form-select" id="correctOption" required>
                                    <option value="option1">Option 1</option>
                                    <option value="option2">Option 2</option>
                                    <option value="option3">Option 3</option>
                                    <option value="option4">Option 4</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="saveQuestionBtn">Save</button>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Delete Question Confirmation Modal -->
        <div class="modal fade" id="deleteQuestionModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Delete Question</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete this question? This action cannot be undone.</p>
                        <p class="fw-bold text-danger">Question: <span id="questionToDelete"></span></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirmDeleteQuestionBtn">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>
    <script src="{% static 'js/admin_dashboard.js' %}"></script>
</body>
</html>